{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-box\"\n};\nconst _hoisted_3 = {\n  class: \"options\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"心脏病辅助诊断系统\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n    ref: \"loginForm\",\n    model: $setup.loginForm,\n    rules: _ctx.loginRules,\n    \"label-width\": \"0\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.username = $event),\n        \"prefix-icon\": \"User\",\n        placeholder: \"用户名\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n        \"prefix-icon\": \"Lock\",\n        type: \"password\",\n        placeholder: \"密码\",\n        \"show-password\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        loading: _ctx.loading,\n        class: \"login-button\",\n        onClick: $setup.handleLogin\n      }, {\n        default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"登录\")])),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"loading\", \"onClick\"])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n      class: \"register-link\",\n      to: \"/register\"\n    }, {\n      default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"注册账号\")])),\n      _: 1 /* STABLE */\n    })])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_form","ref","model","$setup","loginForm","rules","_ctx","loginRules","default","_withCtx","_component_el_form_item","prop","_component_el_input","modelValue","username","_cache","$event","placeholder","_","password","type","_component_el_button","loading","onClick","handleLogin","_createTextVNode","_hoisted_3","_component_router_link","to"],"sources":["/Users/liuxingliang/Desktop/wendang/20240415/heart-diagnosis-system/frontend/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-box\">\n      <div class=\"title\">心脏病辅助诊断系统</div>\n      <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" label-width=\"0\">\n        <el-form-item prop=\"username\">\n          <el-input v-model=\"loginForm.username\" prefix-icon=\"User\" placeholder=\"用户名\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input v-model=\"loginForm.password\" prefix-icon=\"Lock\" type=\"password\" placeholder=\"密码\" show-password></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" :loading=\"loading\" class=\"login-button\" @click=\"handleLogin\">登录</el-button>\n        </el-form-item>\n        <div class=\"options\">\n          <router-link class=\"register-link\" to=\"/register\">注册账号</router-link>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\nimport { login } from '@/api/user'\nimport md5 from 'md5'\n\nexport default {\n  name: 'Login',\n  setup() {\n    const router = useRouter()\n    const store = useStore()\n    const loginForm = ref(null)\n    \n    const state = reactive({\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [{ required: true, trigger: 'blur', message: '请输入用户名' }],\n        password: [{ required: true, trigger: 'blur', message: '请输入密码' }]\n      },\n      loading: false\n    })\n    \n    const handleLogin = () => {\n      loginForm.value.validate(valid => {\n        if (valid) {\n          state.loading = true\n          // 密码MD5加密\n          const loginData = {\n            username: state.loginForm.username,\n            password: md5(state.loginForm.password)\n          }\n          \n          login(loginData).then(res => {\n            store.dispatch('login', res.data)\n            ElMessage.success('登录成功')\n            router.push('/home')\n          }).catch(error => {\n            ElMessage.error(error.message || '登录失败')\n          }).finally(() => {\n            state.loading = false\n          })\n        }\n      })\n    }\n    \n    return {\n      loginForm,\n      ...toRefs(state),\n      handleLogin\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.login-box {\n  width: 350px;\n  padding: 30px;\n  background-color: #fff;\n  border-radius: 5px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.title {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 30px;\n  text-align: center;\n  color: #409EFF;\n}\n\n.login-button {\n  width: 100%;\n}\n\n.options {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n}\n\n.register-link {\n  color: #409EFF;\n  text-decoration: none;\n  font-size: 14px;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAW;;EAYbA,KAAK,EAAC;AAAS;;;;;;;uBAb1BC,mBAAA,CAkBM,OAlBNC,UAkBM,GAjBJC,mBAAA,CAgBM,OAhBNC,UAgBM,G,0BAfJD,mBAAA,CAAkC;IAA7BH,KAAK,EAAC;EAAO,GAAC,WAAS,sBAC5BK,YAAA,CAaUC,kBAAA;IAbDC,GAAG,EAAC,WAAW;IAAEC,KAAK,EAAEC,MAAA,CAAAC,SAAS;IAAGC,KAAK,EAAEC,IAAA,CAAAC,UAAU;IAAE,aAAW,EAAC;;IAJlFC,OAAA,EAAAC,QAAA,CAKQ,MAEe,CAFfV,YAAA,CAEeW,uBAAA;MAFDC,IAAI,EAAC;IAAU;MALrCH,OAAA,EAAAC,QAAA,CAMU,MAAuF,CAAvFV,YAAA,CAAuFa,mBAAA;QANjGC,UAAA,EAM6BV,MAAA,CAAAC,SAAS,CAACU,QAAQ;QAN/C,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAM6Bb,MAAA,CAAAC,SAAS,CAACU,QAAQ,GAAAE,MAAA;QAAE,aAAW,EAAC,MAAM;QAACC,WAAW,EAAC;;MANhFC,CAAA;QAQQnB,YAAA,CAEeW,uBAAA;MAFDC,IAAI,EAAC;IAAU;MARrCH,OAAA,EAAAC,QAAA,CASU,MAAoH,CAApHV,YAAA,CAAoHa,mBAAA;QAT9HC,UAAA,EAS6BV,MAAA,CAAAC,SAAS,CAACe,QAAQ;QAT/C,uBAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAS6Bb,MAAA,CAAAC,SAAS,CAACe,QAAQ,GAAAH,MAAA;QAAE,aAAW,EAAC,MAAM;QAACI,IAAI,EAAC,UAAU;QAACH,WAAW,EAAC,IAAI;QAAC,eAAa,EAAb;;MATrGC,CAAA;QAWQnB,YAAA,CAEeW,uBAAA;MAbvBF,OAAA,EAAAC,QAAA,CAYU,MAAqG,CAArGV,YAAA,CAAqGsB,oBAAA;QAA1FD,IAAI,EAAC,SAAS;QAAEE,OAAO,EAAEhB,IAAA,CAAAgB,OAAO;QAAE5B,KAAK,EAAC,cAAc;QAAE6B,OAAK,EAAEpB,MAAA,CAAAqB;;QAZpFhB,OAAA,EAAAC,QAAA,CAYiG,MAAEM,MAAA,QAAAA,MAAA,OAZnGU,gBAAA,CAYiG,IAAE,E;QAZnGP,CAAA;;MAAAA,CAAA;QAcQrB,mBAAA,CAEM,OAFN6B,UAEM,GADJ3B,YAAA,CAAoE4B,sBAAA;MAAvDjC,KAAK,EAAC,eAAe;MAACkC,EAAE,EAAC;;MAfhDpB,OAAA,EAAAC,QAAA,CAe4D,MAAIM,MAAA,QAAAA,MAAA,OAfhEU,gBAAA,CAe4D,MAAI,E;MAfhEP,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}